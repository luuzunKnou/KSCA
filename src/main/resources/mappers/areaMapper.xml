<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
	PUBLIC "-//mybatis.org//DTD config 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.luuzun.ksca.persistence.AreaDAO">
	<select id="listAll" resultType="Area">
		SELECT * From area
	</select>
	
	<select id="read" resultType="Area">
		SELECT * From area 
			WHERE code=#{code} 
	</select>
	
	<!-- <select id="readByManager" resultType="Area">
		SELECT DISTINCT city, city_code, gu, gu_code 
			FROM area 
			WHERE manager=#{manager};
	</select> -->
		
	<insert id="create">
		INSERT INTO area(code, manager, city, city_code, gu, gu_code, branch, branch_code) VALUES
			(#{code}, #{manager}, #{city}, #{cityCode}, #{gu}, #{guCode}, #{branch}, #{branchCode})
	</insert>
	
	<update id="update">
		UPDATE area
			<set> 
				<if test="code != null"> 		code		=#{code}, </if>
				<if test="manager != manager"> 	manager		=#{manager}, </if>
				<if test="city != null"> 		city		=#{city}, </if>
				<if test="cityCode != null"> 	city_code	=#{cityCode}, </if>
				<if test="gu != null"> 			gu			=#{gu}, </if>
				<if test="guCode != null"> 		gu_code		=#{guCode}, </if> 
				<if test="branch != null"> 		branch		=#{branch}, </if>
				<if test="branchCode != null"> 	branch_code	=#{branchCode} </if>
			</set>
			WHERE code=#{code};
	</update>
	
	<delete id="delete">
		DELETE FROM area 
			WHERE code=#{code};
	</delete>
</mapper>