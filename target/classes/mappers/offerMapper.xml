<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
	PUBLIC "-//mybatis.org//DTD config 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.luuzun.ksca.persistence.OfferDAO">
	
	<select id="listAll" resultType="Offer">
		SELECT * From offer
	</select>
	
	<select id="read" resultType="Offer">
		SELECT * From offer 
			WHERE code=#{code}; 
	</select>
	
	<select id="readByAreaCode" resultType="Offer">
		SELECT * FROM offer 
			WHERE area_code=#{areaCode};
	</select>
	
	<insert id="create"  useGeneratedKeys="true" keyProperty="code">
		INSERT INTO offer(area_code, branch_code, ssc_code, program, begin_date, end_date, monthly_oper, active_user, color) VALUES
			(#{areaCode}, #{branchCode}, #{sscCode}, #{program}, #{beginDate}, #{endDate}, #{monthlyOper}, #{activeUser}, #{color});
	</insert>
	
	<update id="update">
		UPDATE offer	
			<set> 
				<if test="areaCode 	  != null"> area_code	=#{areaCode}, </if>
				<if test="branchCode  != null"> branch_code	=#{branchCode}, </if>
				<if test="sscCode     != null"> ssc_code	=#{sscCode}, </if>
				<if test="program  	  != null"> program		=#{program}, </if>
				<if test="beginDate   != null"> begin_date	=#{beginDate}, </if>
				<if test="endDate  	  != null"> end_date	=#{endDate}, </if>
				<if test="monthlyOper != null"> monthly_oper=#{monthlyOper}, </if>
				<if test="activeUser  != null"> active_user	=#{activeUser}, </if>
				<if test="color  	  != null"> color		=#{color} </if>
			</set>
			WHERE code=#{code}; 
	</update>
	
	<delete id="delete">
		DELETE FROM offer 
			WHERE code=#{code} 
	</delete>
</mapper>